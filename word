<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å•è¯èƒŒè¯µå°ç¨‹åºï¼ˆå«ç»Ÿè®¡ï¼‰</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
  <div class="max-w-4xl mx-auto p-6">
    <header class="flex items-center justify-between mb-6">
      <h1 class="text-2xl font-bold">å•è¯èƒŒè¯µå°ç¨‹åºï¼ˆå¡ç‰‡ + ç»Ÿè®¡ï¼‰</h1>
      <div class="space-x-2">
        <button id="btnList" class="px-3 py-1 border rounded">å•è¯åˆ—è¡¨</button>
        <button id="btnExport" class="px-3 py-1 bg-blue-600 text-white rounded">å¯¼å‡ºæ ‡è®°</button>
        <button id="btnReset" class="px-3 py-1 border rounded">æ¸…é™¤æ ‡è®°</button>
      </div>
    </header>

    <main class="md:flex md:gap-6">
      <!-- å¡ç‰‡åŒº -->
      <section id="cardArea" class="flex-1">
        <!-- å¡ç‰‡ä¼šè¢« JS æ¸²æŸ“åˆ°è¿™é‡Œ -->
      </section>

      <!-- ç»Ÿè®¡åŒº -->
      <aside class="w-full md:w-80 mt-6 md:mt-0">
        <div class="bg-white rounded-xl shadow p-4">
          <h2 class="font-semibold mb-2">ç»Ÿè®¡</h2>
          <div class="text-sm text-gray-600 mb-4">å·²è®°ä½ï¼š<span id="countKnown">0</span> &nbsp; | &nbsp; æ²¡è®°ä½ï¼š<span id="countUnknown">0</span> &nbsp; | &nbsp; æ€»æ•°ï¼š<span id="countTotal">0</span></div>

          <div class="mb-3">
            <div class="h-4 bg-gray-200 rounded overflow-hidden">
              <div id="progressBar" class="h-4 bg-green-500 rounded" style="width:0%"></div>
            </div>
            <div class="text-xs text-gray-500 mt-1">è¿›åº¦ï¼š<span id="percent">0%</span></div>
          </div>

          <div class="mt-4">
            <button id="prevBtn" class="w-full mb-2 px-3 py-2 border rounded">ä¸Šä¸€å¼ </button>
            <button id="nextBtn" class="w-full px-3 py-2 bg-indigo-600 text-white rounded">ä¸‹ä¸€å¼ </button>
          </div>

          <div class="mt-4 text-xs text-gray-500">æç¤ºï¼šå¯ä»¥ä½¿ç”¨â€œä¸Šä¸€å¼ /ä¸‹ä¸€å¼ â€æˆ–é”®ç›˜å·¦å³é”®ç¿»é¡µã€‚</div>
        </div>
      </aside>
    </main>

    <!-- å•è¯åˆ—è¡¨æ¨¡æ€ -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center">
      <div class="bg-white w-11/12 md:w-3/4 max-w-3xl rounded-lg p-4">
        <div class="flex justify-between items-center mb-3">
          <h3 class="font-semibold">å•è¯åˆ—è¡¨ï¼ˆç‚¹å‡»å¯åˆ‡æ¢å·²è®°ä½/æ²¡è®°ä½ï¼‰</h3>
          <button id="closeModal" class="text-gray-600">å…³é—­</button>
        </div>
        <div id="listArea" class="max-h-64 overflow-auto"></div>
      </div>
    </div>

  </div>

  <script>
    // å•è¯æ•°æ®ï¼ˆä»å›¾ç‰‡æå–çš„ä¾‹å¥ï¼‰
    const words = [
      { term: "sign", phonetic: "/saÉªn/", sentence: "New signs at the Pentagon proclaim Pete Hegseth 'Secretary of War' yesterday..." },
      { term: "Pentagon", phonetic: "/ËˆpÉ›ntÉ™É¡É™n/", sentence: "New signs at the Pentagon proclaim Pete Hegseth..." },
      { term: "proclaim", phonetic: "/prÉ™ËˆkleÉªm/", sentence: "New signs at the Pentagon proclaim Pete Hegseth 'Secretary of War'..." },
      { term: "Secretary of War", phonetic: "/ËˆsÉ›krÉ™tÉ›ri É™v wÉ”Ër/", sentence: "...proclaim Pete Hegseth 'Secretary of War'..." },
      { term: "Department of Defense", phonetic: "/dÉªËˆpÉ‘ËrtmÉ™nt É™v dÉªËˆfÉ›ns/", sentence: "...Trump ordered the Department of Defense to be renamed the Department of War..." },
      { term: "revert", phonetic: "/rÉªËˆvÉœËrt/", sentence: "...reverting to a title it held before 1949 (76 years ago)." },
      { term: "officials", phonetic: "/É™ËˆfÉªÊƒÉ™lz/", sentence: "Officials made the change after World War II to emphasize preventing conflict." },
      { term: "make the change", phonetic: "/meÉªk Ã°É™ tÊƒeÉªndÊ’/", sentence: "Officials made the change after World War II to emphasize preventing conflict." },
      { term: "prevent", phonetic: "/prÉªËˆvÉ›nt/", sentence: "Officials made the change after World War II to emphasize preventing conflict." },
      { term: "conflict", phonetic: "/ËˆkÉ’nflÉªkt/", sentence: "Officials made the change after World War II to emphasize preventing conflict." },
      { term: "strength", phonetic: "/strÉ›Å‹Î¸/", sentence: "\"I think it sends a message of victory ... a message of strength,\" Trump said." },
      { term: "send", phonetic: "/sÉ›nd/", sentence: "\"I think it sends a message of victory ...\"" },
      { term: "Department of War", phonetic: "/dÉªËˆpÉ‘ËrtmÉ™nt É™v wÉ”Ër/", sentence: "...to be renamed the Department of War â€” reverting to a title it held before 1949." },

      { term: "Tylenol", phonetic: "/ËˆtaÉªlÉ™ËŒnÉ’l/", sentence: "Robert F. Kennedy Jr. plans to announce that pregnant women's Tylenol use ... are potentially linked to autism." },
      { term: "folate", phonetic: "/ËˆfoÊŠleÉªt/", sentence: "...pregnant women's Tylenol use and folate deficiencies are potentially linked to autism." },
      { term: "deficiencies", phonetic: "/dÉªËˆfÉªÊƒÉ™nsiz/", sentence: "...folate deficiencies are potentially linked to autism." },
      { term: "potentially", phonetic: "/pÉ™ËˆtÉ›nÊƒÉ™li/", sentence: "...are potentially linked to autism." },
      { term: "according to people familiar with the matter", phonetic: "/É™ËˆkÉ”ËrdÉªÅ‹ tuË ËˆpiËpÉ™l fÉ™ËˆmÉªljÉ™r wÉªÃ° Ã°É™ ËˆmÃ¦tÉ™r/", sentence: "...according to people familiar with the matter." },
      { term: "suggest", phonetic: "/sÉ™ËˆdÊ’É›st/", sentence: "The report will also suggest a medicine derived from folate can treat autism symptoms." },
      { term: "medicine", phonetic: "/ËˆmÉ›dÉªsÉªn/", sentence: "The report will also suggest a medicine derived from folate can treat autism symptoms." },
      { term: "autism", phonetic: "/ËˆÉ”ËtÉªzÉ™m/", sentence: "...are potentially linked to autism." },
      { term: "derive from", phonetic: "/dÉªËˆraÉªv frÉ™m/", sentence: "...a medicine derived from folate can treat autism symptoms." },
      { term: "symptom", phonetic: "/ËˆsÉªmptÉ™m/", sentence: "a medicine derived from folate can treat autism symptoms." },
      { term: "rigorous", phonetic: "/ËˆrÉªÉ¡É™rÉ™s/", sentence: "Scientists say conducting rigorous autism research can take years;" },
      { term: "contributor", phonetic: "/kÉ™nËˆtrÉªbjÉ™tÉ™r/", sentence: "...a variety of possible contributors have been identified." },
      { term: "obstetrician", phonetic: "/ËŒÉ’bstÉ™ËˆtrÉªÊƒÉ™n/", sentence: "The American College of Obstetricians and Gynecologists says Tylenol is safe..." },
      { term: "gynecologist", phonetic: "/ËŒÉ¡aÉªnÉ™ËˆkÉ’lÉ™dÊ’Éªst/", sentence: "The American College of Obstetricians and Gynecologists says Tylenol is safe..." },
      { term: "deny", phonetic: "/dÉªËˆnaÉª/", sentence: "Tylenol maker Kenvue denied any causal link between the drug and autism." },
      { term: "causal", phonetic: "/ËˆkÉ”ËzÉ™l/", sentence: "Kenvue denied any causal link between the drug and autism." },
      { term: "as with all drugs", phonetic: "/Ã¦z wÉªÃ° É”Ël drÊŒÉ¡z/", sentence: "...pregnant women consult with their doctors, as with all drugs." },

      { term: "major immigration", phonetic: "/ËˆmeÉªdÊ’É™r ËŒÉªmÉªËˆÉ¡reÉªÊƒÉ™n/", sentence: "major immigration raid Georgia immigration authorities ..." },
      { term: "raid", phonetic: "/reÉªd/", sentence: "major immigration raid" },
      { term: "Georgia", phonetic: "/ËˆdÊ’É”ËrdÊ’É™/", sentence: "raid Georgia immigration authorities" },
      { term: "immigration authorities", phonetic: "/ËŒÉªmÉªËˆÉ¡reÉªÊƒÉ™n É™ËˆÎ¸É”ËrÉªtiz/", sentence: "Georgia immigration authorities ..." },
      { term: "construction site", phonetic: "/kÉ™nËˆstrÊŒkÊƒÉ™n saÉªt/", sentence: "...construction site ..." },
      { term: "diplomatic", phonetic: "/ËŒdÉªplÉ™ËˆmÃ¦tÉªk/", sentence: "diplomatic tension" },
      { term: "tension", phonetic: "/ËˆtÉ›nÊƒÉ™n/", sentence: "diplomatic tension" },
      { term: "ally", phonetic: "/ËˆÃ¦laÉª/", sentence: "ally" },
      { term: "plant", phonetic: "/plÃ¦nt/", sentence: "plant" },
      { term: "billion", phonetic: "/ËˆbÉªljÉ™n/", sentence: "...billion ..." },
      { term: "electric", phonetic: "/ÉªËˆlÉ›ktrÉªk/", sentence: "electric LG Energy Solution vehicle" },
      { term: "LG Energy Solution", phonetic: "/ËŒÉ›l ËˆdÊ’i ËˆÉ›nÉ™rdÊ’i sÉ™ËˆluËÊƒÉ™n/", sentence: "LG Energy Solution" },
      { term: "vehicle", phonetic: "/ËˆviËÉ™kÉ™l/", sentence: "electric LG Energy Solution vehicle" },
      { term: "Hyundai Motor Group", phonetic: "/ËˆhÊŒndeÉª ËˆmoÊŠtÉ™r ËŒÉ¡ruËp/", sentence: "Hyundai Motor Group" },
      { term: "republican", phonetic: "/rÉªËˆpÊŒblÉªkÉ™n/", sentence: "republican governor" },
      { term: "governor", phonetic: "/ËˆÉ¡ÊŒvÉ™rnÉ™r/", sentence: "republican governor" },
      { term: "tout", phonetic: "/taÊŠt/", sentence: "governor tout economic development" },
      { term: "economic development", phonetic: "/ËŒÉ›kÉ™ËˆnÉ’mÉªk dÉªËˆvÉ›lÉ™pmÉ™nt/", sentence: "governor tout economic development" }
    ];

    const STORAGE_KEY = "rememberedWords";
    let current = 0;
    let remembered = JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}");

    // DOM elements
    const cardArea = document.getElementById('cardArea');
    const countKnown = document.getElementById('countKnown');
    const countUnknown = document.getElementById('countUnknown');
    const countTotal = document.getElementById('countTotal');
    const progressBar = document.getElementById('progressBar');
    const percentEl = document.getElementById('percent');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const btnList = document.getElementById('btnList');
    const modal = document.getElementById('modal');
    const closeModal = document.getElementById('closeModal');
    const listArea = document.getElementById('listArea');
    const btnExport = document.getElementById('btnExport');
    const btnReset = document.getElementById('btnReset');

    function updateStats() {
      const total = words.length;
      const known = Object.values(remembered).filter(v => v === 'known').length;
      const unknown = Object.values(remembered).filter(v => v === 'unknown').length;
      const percent = Math.round((known / total) * 100);

      countTotal.textContent = total;
      countKnown.textContent = known;
      countUnknown.textContent = unknown;
      progressBar.style.width = percent + "%";
      percentEl.textContent = percent + "%";
    }

    function speak(text) {
      if (!window.speechSynthesis) return;
      const u = new SpeechSynthesisUtterance(text);
      u.lang = 'en-US';
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(u);
    }

    function renderCard() {
      const w = words[current];
      cardArea.innerHTML = '';
      const card = document.createElement('div');
      card.className = 'bg-white shadow-xl rounded-2xl p-8 max-w-2xl w-full text-center';

      const title = document.createElement('h2');
      title.className = 'text-3xl font-bold mb-2';
      title.textContent = w.term;

      const phon = document.createElement('p');
      phon.className = 'text-gray-500 mb-4';
      phon.textContent = w.phonetic;

      const sent = document.createElement('p');
      sent.className = 'italic mb-6 text-left';
      sent.textContent = w.sentence;

      const btns = document.createElement('div');
      btns.className = 'flex justify-center gap-4';

      const knownBtn = document.createElement('button');
      knownBtn.className = 'bg-green-500 text-white px-4 py-2 rounded-xl shadow hover:bg-green-600';
      knownBtn.textContent = 'å·²è®°ä½';
      knownBtn.onclick = () => markWord('known');

      const unknownBtn = document.createElement('button');
      unknownBtn.className = 'bg-red-500 text-white px-4 py-2 rounded-xl shadow hover:bg-red-600';
      unknownBtn.textContent = 'æ²¡è®°ä½';
      unknownBtn.onclick = () => markWord('unknown');

      const speakBtn = document.createElement('button');
      speakBtn.className = 'mt-4 text-blue-600 underline';
      speakBtn.textContent = 'ğŸ”Š æ’­æ”¾å‘éŸ³';
      speakBtn.onclick = () => speak(w.term + '. ' + w.sentence);

      const navInfo = document.createElement('div');
      navInfo.className = 'mt-4 text-gray-600';
      navInfo.textContent = `${current + 1} / ${words.length}`;

      btns.appendChild(knownBtn);
      btns.appendChild(unknownBtn);
      card.appendChild(title);
      card.appendChild(phon);
      card.appendChild(sent);
      card.appendChild(btns);
      card.appendChild(speakBtn);
      card.appendChild(navInfo);

      cardArea.appendChild(card);
      updateStats();
    }

    function markWord(status) {
      remembered[words[current].term] = status;
      localStorage.setItem(STORAGE_KEY, JSON.stringify(remembered));
      // è‡ªåŠ¨è·³åˆ°ä¸‹ä¸€å¼ 
      if (current < words.length - 1) current++;
      else current = 0;
      renderCard();
    }

    prevBtn.addEventListener('click', () => {
      if (current > 0) current--;
      else current = words.length -1;
      renderCard();
    });

    nextBtn.addEventListener('click', () => {
      if (current < words.length - 1) current++;
      else current = 0;
      renderCard();
    });

    // é”®ç›˜æ”¯æŒ å·¦å³
    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') nextBtn.click();
      if (e.key === 'ArrowLeft') prevBtn.click();
    });

    // åˆ—è¡¨æ¨¡æ€ç›¸å…³
    btnList.addEventListener('click', () => {
      renderList();
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    });
    closeModal.addEventListener('click', () => {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    });

    function renderList() {
      listArea.innerHTML = '';
      words.forEach((w, idx) => {
        const row = document.createElement('div');
        row.className = 'flex items-center justify-between p-2 border-b';

        const left = document.createElement('div');
        left.innerHTML = `<div class='font-medium'>${w.term}</div><div class='text-xs text-gray-500'>${w.phonetic}</div>`;
        left.style.cursor = 'pointer';
        left.onclick = () => { current = idx; renderCard(); modal.classList.add('hidden'); };

        const status = remembered[w.term];
        const right = document.createElement('div');
        const toggleBtn = document.createElement('button');
        toggleBtn.className = 'px-2 py-1 border rounded text-sm';
        toggleBtn.textContent = status === 'known' ? 'å·²è®°ä½' : status === 'unknown' ? 'æ²¡è®°ä½' : 'æœªæ ‡è®°';
        toggleBtn.onclick = () => {
          const next = remembered[w.term] === 'known' ? 'unknown' : 'known';
          remembered[w.term] = next;
          localStorage.setItem(STORAGE_KEY, JSON.stringify(remembered));
          renderList();
          updateStats();
        };
        right.appendChild(toggleBtn);

        row.appendChild(left);
        row.appendChild(right);
        listArea.appendChild(row);
      });
    }

    // å¯¼å‡ºå·²æ ‡è®°ï¼ˆknown/unknownï¼‰
    btnExport.addEventListener('click', () => {
      const entries = Object.entries(remembered).map(([k,v]) => `${k}\t${v}`).join('\n');
      const blob = new Blob([entries], {type: 'text/plain;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'vocab_marks.txt';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    });

    // æ¸…é™¤æ ‡è®°
    btnReset.addEventListener('click', () => {
      if (!confirm('ç¡®è®¤è¦æ¸…é™¤æ‰€æœ‰è®°å¿†æ ‡è®°å—ï¼Ÿ')) return;
      remembered = {};
      localStorage.removeItem(STORAGE_KEY);
      renderCard();
    });

    // åˆå§‹æ¸²æŸ“
    renderCard();
  </script>
</body>
</html>
